{% extends "layout.html.twig" %}

{% block content %}
	<div id="layoutSidenav_content">
		<main>
			<div class="container-fluid px-4">
				<h1 class="mt-4">Dashboard</h1>
				<div class="row">
					<div class="col-lg-6">
						<div class="card mb-4">
							<div class="card-header">
								<i class="fas fa-chart-bar me-1"></i>
								Materiales más reservados
							</div>
							<div class="card-body">
								<canvas id="myBarChart" width="100%" height="50"></canvas>
							</div>
							<div class="card-footer small text-muted">Última actualización: {{actualizado}}</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div class="card mb-4">
							<div class="card-header">
								<i class="fas fa-chart-pie me-1"></i>
								Estado de hoy de las salas
							</div>
							<div class="card-body">
								<canvas id="myPieChart" width="100%" height="50"></canvas>
							</div>
							<div class="card-footer small text-muted">Última actualización: {{actualizado}}</div>
						</div>
					</div>
				</div>
				<div class="card mb-4">
					<div class="card-header">
						<i class="fas fa-table me-1"></i>
						Devoluciones de Hoy
					</div>
					<div class="card-body">
						<table id="datatablesSimple">
							<thead>
								<tr>
									<th>Nombre Usuario</th>
									<th>Material Reservado</th>
									<th>Fecha de la Reserva</th>
									<th>Fecha de la Devolución</th>
									<th>Cantidad</th>
								</tr>
							</thead>
							<tfoot>
								<tr>
									<th>Nombre Usuario</th>
									<th>Material Reservado</th>
									<th>Fecha de la Reserva</th>
									<th>Fecha de la Devolución</th>
									<th>Cantidad</th>
								</tr>
							</tfoot>
							<tbody>
								{% for task in reservas %}
                                    {% if fechaActual == task.fechaDevolucion|date("Y-m-d") %}
									    <tr>
										    <td>{{task.idUsuario.nombreUsuario}}</td>
										    <td>{{task.idMaterial.nombre}}</td>
										    <td>{{task.fechaReserva|date("d/m/Y")}}</td>
										    <td>{{task.fechaDevolucion|date("d/m/Y")}}</td>
										    <td>{{task.cantidad}}</td>
									    </tr>
                                    {% endif %}
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</main>
	{% endblock %}
